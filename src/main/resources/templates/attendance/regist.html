<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<link th:href="@{/css/style.css}" rel="stylesheet" />
<style>
	.time-selectors {
		display: flex;
		justify-content: center;
		align-items: center;
		height: 100%;
	}
 
	.time-selectors select {
		width: 90px;
		padding: 10px;
		font-size: 1em;
		border-radius: 10px;
		margin-right: 5px;
	}
 
	.form-control{
		width: 150px;
		padding: 10px 20px;
		font-size: 1em;
		border-radius: 10px;
		text-align: center;
	}
</style>
 
<title>勤怠登録画面</title>
</head>
<body>
	
	<script th:src="@{/js/attendance.js}"></script>
	<div class="container">
		<div class="component">
			<p>ユーザ名: <span th:text="${loginUser.name}"></span></p>
			<p>ユーザID: <span th:text="${loginUser.userId}"></span></p>
			<p>ステータス:</p>
		</div>
	
	<form id="attendanceForm" th:action="@{/attendance/regist}" method="post" th:object="${formList}">
		<div style="display: flex; align-items: center;">
			<label>表示年月：</label>
			<select name="year">
				<option th:each="year : ${#numbers.sequence(2023, 2025)}" th:value="${year}"
					th:text="${year}" th:selected="${year == selectedYear}"></option>
			</select>
			<p for="year">年</p>
	
	
			<select name="month">
				<option th:each="month : ${#numbers.sequence(1, 12)}" th:value="${month}"
					th:text="${month}" th:selected="${month == selectedMonth}"></option>
			</select>
			<p for="month">月</p>
	
			<button type="submit" name="display">表示</button>
		</div>
	</form>
	
		
		
		<div style="display: flex; justify-content: flex-end;">
			<form th:action="@{/attendance/regist}" method="post" th:if="${session.loginUser.role == '0002'}">
				<input type="submit" value="却下" class="btn btn-mgmt" />
			</form>
			<form th:action="@{/attendance/regist}" method="post" th:if="${session.loginUser.role == '0002'}">
				<input type="submit" value="承認" class="btn btn-mgmt" />
			</form>
			<form th:action="@{/attendance/regist}" method="post">
				<input type="submit" value="承認申請" class="btn btn-mgmt" style="margin-right: 10px;" />
			</form>
			<form th:action="@{/attendance/regist}" method="post" onsubmit="return validateAttendanceInput();">
				<input type="submit" value="登録" class="btn btn-mgmt" />
			</form>
		</div>
		
		<table class="table data-table">
			<thead>
				<tr>
					<th class="w150">承認申請者</th>
					<th class="w120">申請対象年月</th>
					<th class="w120">申請日</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td class="w150"></td>
					<td class="w120"></td>
					<td class="w120"></td>
				</tr>
			</tbody>
		</table>
	
		<table class="table table-hover">
			<thead>
				<tr>
					<th class="w40">日付</th>
					<th class="w40">曜日</th>
					<th class="w100">勤務状況</th>
					<th class="w120">出勤時間</th>
					<th class="w120">退勤時間</th>
					<th class="w150">備考</th>
				</tr>
			</thead>
			<tbody id="attendanceTableBody" style="overflow-y: scroll;">
				<tr th:each="formList, stat : *{attendanceFormList.attendanceFormList}">
					<td class="w40" th:text="${formList.formattedDate}">
						<input type="hidden" th:name="|attendanceFormList[${stat.index}].formattedDate|"
							th:value="${formList.formattedDate}" />
					</td>
					<td class="w40" th:text="${formList.formattedWeek}">
						<input type="hidden" th:name="|attendanceFormList[${stat.index}].formattedWeek|"
							th:value="${formList.formattedWeek}" />
					</td>
					<td class="w100" th:text="${formList.status}">
						<input type="hidden" th:name="|attendanceFormList[${stat.index}].status|" th:value="${formList.status}" />
					</td>
					<td class="w120">
						<input type="hidden" th:name="|attendanceFormList[${stat.index}].startTime|"
							th:value="${formList.startTime}" />
						<span th:text="${@attendanceService.formatTimeToHHMM(formList.startTime)}"></span>
					</td>
					<td class="w120">
						<input type="hidden" th:name="|attendanceFormList[${stat.index}].endTime|" th:value="${formList.endTime}" />
						<span th:text="${@attendanceService.formatTimeToHHMM(formList.endTime)}"></span>
					</td>
					<td class="w150" th:text="${formList.remarks}">
						<input type="hidden" th:name="|attendanceFormList[${stat.index}].remarks|" th:value="${formList.remarks}" />
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	
</body>
</html>